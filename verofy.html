<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verofy: Technical Contribution - Kamran Khalid</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="proconvey-mermaid.css">
    <link rel="icon" type="image/jpeg" href="assets/profile.jpeg">
    <script src="assets/js/menu-loader.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.0/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: "base",
            themeVariables: {
                background: "#111824",
                primaryColor: "#222e44",
                primaryTextColor: "#e6f0ff",
                primaryBorderColor: "#33d69f",
                lineColor: "#33d69f",
                secondaryColor: "#182233",
                tertiaryColor: "#0f151f",
                fontFamily: "IBM Plex Mono, Space Grotesk, Segoe UI, Arial, sans-serif",
                fontSize: "15px",
                edgeLabelBackground: "#182233"
            }
        });
    </script>
</head>

<body data-menu-root="." data-menu-active="experience,verofy" data-menu-variant="default">
    <div class="page-rail">
        <div class="rail-progress" id="railProgress"></div>
    </div>
    <div id="site-menu"></div>

    <section class="page-hero" id="part-1-banner">
        <div class="container hero-container">
            <div class="hero-split-layout">
                <div class="hero-main-pane">
                    <span class="page-label">Payments built to power your business growth</span>
                    <h1 class="page-title">Verofy<sup>®</sup></h1>
                    <p class="page-subtitle hero-subtitle">
                        Simpler. Faster. Smarter. Verofy<sup>®</sup> is an FCA Authorised and Regulated Payment Institution, delivering next-generation payment solutions and enterprise infrastructure for SMEs. Experience effortless card payments, next-day funding, real-time insights, and fanatical UK-based support—all in one platform.
                    </p>
                    <div class="hero-meta-clean">
                        <div class="hero-meta-row"><span>Role</span>Senior Software Engineer (Technical Architecture Ownership)</div>
                        <div class="hero-meta-row"><span>Period</span>April 2024 – Present</div>
                        <div class="hero-meta-row"><span>Focus</span>Enterprise payments, onboarding, settlements, compliance, and support innovation</div>
                        <div class="hero-meta-row">
                            <span>Organization</span>
                            <span class="hero-meta-links">
                                <a href="https://verofy.com" target="_blank" rel="noopener">Verofy Website</a>
                                <span class="hero-meta-divider">•</span>
                                <a href="https://www.linkedin.com/company/verofy/" target="_blank" rel="noopener">LinkedIn</a>
                                <span class="hero-meta-divider">•</span>
                                <a href="experience.html" rel="noopener">Experience Timeline</a>
                            </span>
                        </div>
                        <div class="hero-meta-row">
                            <span>Regulatory</span>
                            <span class="hero-meta-links">
                                FCA Authorised (Ref: 785762) • PCI+ Compliance • UK & EU Trademarked
                            </span>
                        </div>
                    </div>
                </div>
                <div class="hero-side-pane">
                    <div class="hero-innovation-hook">
                        <span class="hero-innovation-kicker">What is Verofy?</span>
                        <p>
                            Verofy<sup>®</sup> is redefining payments for SMEs—combining lightning-fast transactions, next-day settlements, and real-time business management in the cloud and app. Our platform empowers businesses with mobile, in-store, phone, and online payments, advanced fraud AI, and seamless ePOS integration. Supported by a UK-based team, Verofy<sup>®</sup> is your partner for growth, compliance, and innovation.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="hero-bottom-spacer"></div>
    </section>

    <section class="section proconvey-part-section part-two-section" id="part-2-verofy-overview">
        <div class="container">
            <div class="part-header">
                <h2 class="part-title">Verofy<sup>®</sup> Platform Overview</h2>
                <p class="part-intro">
                    Verofy<sup>®</sup> is the single provider for acquiring and payment needs—offering a full suite of solutions: Move (mobile payments), PayLinks (online links), Moto (phone payments), PCI+ (compliance), Faster Settlements, Fraud AI, and more. Our enterprise cloud and app deliver real-time insights, onboarding, and business management. All products are supported by UK-based Concierge and Tracker services, ensuring you’re always in control and supported at every step.
                </p>
                <ul class="verofy-keypoints">
                    <li><strong>Next-day funding</strong> for improved cash flow</li>
                    <li><strong>Real-time insights</strong> via cloud and app</li>
                    <li><strong>PCI+ compliance</strong> made simple</li>
                    <li><strong>Fanatical UK-based support</strong> (Concierge)</li>
                    <li><strong>FCA Authorised & Regulated</strong> (Ref: 785762)</li>
                </ul>
            </div>

            <div class="leadership-grid">
                <div class="leadership-story">
                    <h3 class="section-subtitle section-subtitle-tight">Architecture Summary</h3>
                    <p class="content-text">
                        VTiger is used to onboard partners, then synced into the main platform where partners can
                        create sales teams and onboard merchants through Partner and Merchant portals. Those merchants
                        activate payment products (Move, MOTO, VT, PBL) and then run through transaction and settlement pipelines.
                    </p>
                    <p class="content-text">
                        My ownership focused on the cross-service orchestration points: Orders API + webhook synchronization
                        for external ISVs, financial state transitions, transfer/settlement bridges, and commission-linked
                        operational flows with production-grade idempotency and retry safety.
                    </p>
                </div>
                <div class="leadership-metrics">
                    <h4 class="mini-title">Contribution Signals</h4>
                    <div class="metric-chips metric-chips-tight">
                        <div class="metric-chip">707+ Merged PR Entries (Evidence Set)</div>
                        <div class="metric-chip">100+ Weekly Task Blocks (Evidence Set)</div>
                        <div class="metric-chip">5 Advanced Critical Feature Domains</div>
                        <div class="metric-chip">8 Medium Feature Domains</div>
                        <div class="metric-chip">Multi-portal + Multi-webhook Orchestration</div>
                        <div class="metric-chip">Architecture, Sequence, ERD/State Evidence Included</div>
                    </div>
                </div>
            </div>

            <h3 class="section-subtitle">Main Product Architecture</h3>
            <div class="diagram-card topology-diagram-card">
                <div class="diagram-caption">General Business View</div>
                <div class="mermaid">
                    flowchart LR
                        O1[Partner Origination<br/>in VTiger] --> O2[Portal Operations<br/>Admin + Partner + Merchant]
                        O2 --> O3[Merchant Onboarding<br/>by Partner and Sales Team]
                        O3 --> O4[Payment Product Activation<br/>Move + MOTO + VT + PBL]
                        O4 --> O5[Transactions and Settlements]
                        O5 --> O6[Commissions and Support]
                        O4 --> O7[ISV Enablement<br/>Orders API + Status Webhooks]
                </div>
                <div class="diagram-attribution-line">Business narrative view for recommendation/evidence readers.</div>
            </div>

            <div class="diagram-card topology-diagram-card">
                <div class="diagram-caption">Technical Runtime View</div>
                <div class="mermaid">
                    flowchart TD
                        %% ==========================
                        %% 1 - PORTALS
                        %% ==========================

                        %% Set vertical direction for all subgraphs
                        subgraph Portals
                            direction TB
                            Admin["Admin Portal (Angular)"]
                            Partner["Partner Portal (Angular)"]
                            Merchant["Merchant Portal (Angular)"]
                            Mobile["Mobile App (React Native)"]
                        end

                        %% ==========================
                        %% 2 - CORE BACKEND
                        %% ==========================
                        subgraph Core_Backend[Core Backend Services]
                            direction TB
                            CoreAPI["API Backend (Laravel)"]
                            Orders["Orders API & Webhooks"]
                            Messaging["Messaging & Tracker"]
                            Recapx["Recapx Split Settlement"]
                            Finance["Finance Service"]
                        end

                        %% ==========================
                        %% 3 - OPERATIONAL SERVICES
                        %% ==========================
                        subgraph Ops[Operational Services]
                            direction TB
                            Transactions["Transactions"]
                            Settlements["Settlements"]
                            MID["MID Management"]
                            Products["Product Management"]
                            Status["Status & Logistics"]
                            Email["Email Service"]
                            Cron["Scheduled Jobs"]
                        end

                        %% ==========================
                        %% 4 - INTEGRATIONS
                        %% ==========================

                        KYC["KYC/AML"]
                        Payments["Payments (PaymentIQ, Cardstream, GoCardless)"]
                        CRM["CRM (VTiger)"]
                        SFTP["SFTP/CSV"]
                        Bank["ClearBank"]

                        %% ==========================
                        %% 5 - DATA & STORAGE
                        %% ==========================
                        subgraph Data_Storage[Data & Storage]
                            direction TB
                            DB["MySQL Database"]
                            Redis["Redis"]
                            Storage["Object Storage (S3/Minio)"]
                        end

                        %% ==========================
                        %% FLOWS (VERTICAL)
                        %% ==========================
                        Admin --> CoreAPI
                        Partner --> CoreAPI
                        Merchant --> CoreAPI
                        Mobile --> CoreAPI

                        CoreAPI --> Orders
                        CoreAPI --> Messaging
                        CoreAPI --> Recapx
                        CoreAPI --> Finance
                        CoreAPI --> Ops
                        CoreAPI --> Orders
                        CoreAPI --> Messaging
                        CoreAPI --> Recapx
                        CoreAPI --> Finance
                        CoreAPI --> Ops

                        Orders --> Ops
                        Messaging --> Ops
                        Recapx --> Ops
                        Finance --> Ops

                        Ops --> Data_Storage
                        Email --> Data_Storage
                        Cron --> Data_Storage

                        %% Integrations (direct links, no subgraph)
                        CoreAPI --> KYC
                        CoreAPI --> Payments
                        CoreAPI --> CRM
                        Recapx --> SFTP
                        Finance --> Bank
                </div>
                <div class="diagram-attribution-line">Technical flow view aligned with current implementation in main portal and connected services.</div>
            </div>
        </div>
    </section>

    <section class="section proconvey-part-section part-three-section" id="part-3-contribution">
        <div class="container">
            <div class="part-header">
                <h2 class="part-title">My Leadership & Contribution</h2>
                <p class="part-intro">
                    Features are intentionally split by complexity to show where architectural depth,
                    innovation, and product-critical ownership were highest.
                </p>
            </div>

            <h3 class="section-subtitle">Advanced-Level Features (Critical, Complex, Innovative)</h3>
            <div class="narrative-card">
                <p class="content-text">
                    These advanced domains required cross-service orchestration, secure webhook/event contracts,
                    idempotent financial processing, and controlled state transitions under production load.
                </p>
                <p class="content-text">
                    Verification scope: Laravel core + Partner Portal + Merchant Portal + Admin Portal + Transactions API.
                </p>
            </div>

            <div class="feature-stack feature-stack-clean">
                <article class="feature-block">
                    <div class="feature-heading-row">
                        <h4>Orders API + Webhook Synchronization</h4>
                        <div class="pr-evidence pr-evidence-corner">
                            <span class="pr-evidence-label">Representative PRs</span>
                            <div class="pr-evidence-badges">
                                <span class="pr-evidence-badge">#4571</span>
                                <span class="pr-evidence-badge">#4634</span>
                                <span class="pr-evidence-badge">#4941</span>
                                <span class="pr-evidence-badge">#6329</span>
                            </div>
                        </div>
                    </div>
                    <p class="content-text">
                        <strong>Feature Story:</strong> Verofy productized its internal merchant lifecycle for external ISV ecosystems.
                        ISVs can onboard merchants on Verofy, pull full merchant setup details through the Orders API for their own POS products,
                        and then stay synchronized through status webhooks as merchant states change.
                    </p>
                    <ul class="feature-points">
                        <li><strong>Purpose:</strong> Expose merchant onboarding data to ISV systems and keep ISV POS state synchronized in near real-time.</li>
                        <li><strong>Complexity:</strong> Pull + push integration model, location-scoped webhook fan-out, status mapping from <code>overall_status</code>, and sandbox/production parity.</li>
                        <li><strong>Importance:</strong> Lets merchants transact on external POS platforms while Verofy remains the source of truth for onboarding and lifecycle state.</li>
                        <li><strong>Verified Flow:</strong> 1) Partner/Sales onboard merchant in Verofy, 2) ISV calls <code>/orders</code> with <code>verofy_connect_id</code> and <code>pos_provider_id</code>, 3) Orders API returns full merchant snapshot, 4) customer status changes trigger observer, 5) status is mapped and pushed per location webhook, 6) ISV POS updates merchant state (active, transacting, terminal lifecycle, declined/termination paths where applicable).</li>
                    </ul>

                    <div class="diagram-card">
                        <div class="diagram-caption">Architecture Flow</div>
                        <div class="mermaid">
                            flowchart LR
                                A1[1 Partner or Sales Team Onboards Merchant] --> A2[2 Merchant Lifecycle Managed in Verofy]
                                A2 --> B1[3 ISV POS Calls Orders API]
                                B1 --> B2[4 Merchant Snapshot Returned]
                                A2 --> C1[5 Customer overall_status Changes]
                                C1 --> C2[6 Observer Maps Status per Location]
                                C2 --> C3[7 Webhook Sent to ISV Endpoint]
                                C3 --> D1[8 ISV POS Updates Merchant State]
                        </div>
                    </div>

                    <div class="diagram-card">
                        <div class="diagram-caption">Sequence</div>
                        <div class="mermaid">
                            sequenceDiagram
                                actor POS as POS Platform
                                participant API as Orders API
                                participant CRM as CRM Repository
                                participant OBS as Customer Observer
                                participant WH as Webhook Dispatcher

                                POS->>API: POST /orders (verofy_connect_id, pos_provider_id)
                                API->>CRM: getCustomerDetails()
                                CRM-->>POS: customer snapshot

                                OBS->>WH: status changed event
                                WH-->>POS: customer-status webhook (active/transacting/terminal/declined/termination)
                        </div>
                    </div>

                    <div class="diagram-card">
                        <div class="diagram-caption">State Diagram</div>
                        <div class="mermaid">
                            stateDiagram-v2
                                direction LR
                                [*] --> Onboarding
                                Onboarding --> Active : Merchant Created
                                Active --> Synced : Orders API Called
                                Synced --> WebhookSent : Status Changed
                                WebhookSent --> Updated : ISV Updates State
                                Updated --> [*]
                        </div>
                    </div>
                </article>

                <article class="feature-block">
                    <div class="feature-heading-row">
                        <h4>Transfer Payment Pipeline (ClearBank Bridge)</h4>
                        <div class="pr-evidence pr-evidence-corner">
                            <span class="pr-evidence-label">Representative Sources</span>
                            <div class="pr-evidence-badges">
                                <span class="pr-evidence-badge">TransferPayment Pipeline SVGs</span>
                                <span class="pr-evidence-badge">ClearBank Webhook Bridge</span>
                            </div>
                        </div>
                    </div>
                    <ul class="feature-points">
                        <li><strong>Purpose:</strong> Bridge ClearBank webhooks into dedicated transfer-service state orchestration.</li>
                        <li><strong>Complexity:</strong> Signed payload boundary, pass-through signature handling, and retry operations.</li>
                        <li><strong>Importance:</strong> Critical reliability path for payment transfer lifecycle continuity.</li>
                        <li><strong>Verified Flow:</strong> 1) ClearBank posts signed webhook, 2) main API captures raw payload/signature, 3) bridge forwards to transfer service, 4) signed response is returned unchanged, 5) retry endpoints cover failed paths.</li>
                    </ul>

                    <div class="diagram-card">
                        <div class="diagram-caption">Architecture Flow</div>
                        <div class="mermaid">
                            flowchart LR
                                CB[ClearBank] --> EP[/api/clearbank/webhook/]
                                EP --> VC[MoneyTransferController]
                                VC --> BR[Bridge Service]
                                BR --> MT[Money Transfer Service]
                                MT --> ST[CbPayment State Machine]
                                RET[Retry API] --> MT
                        </div>
                    </div>

                    <div class="diagram-card">
                        <div class="diagram-caption">Sequence</div>
                        <div class="mermaid">
                            sequenceDiagram
                                participant CB as ClearBank
                                participant VC as Verofy Endpoint
                                participant BR as Bridge
                                participant MT as Transfer Service

                                CB->>VC: webhook + signature
                                VC->>BR: forward(raw payload)
                                BR->>MT: clearbank/webhooks
                                MT-->>BR: signed response
                                BR-->>VC: pass-through response
                        </div>
                    </div>

                    <div class="diagram-card">
                        <div class="diagram-caption">State Diagram</div>
                        <div class="mermaid">
                            stateDiagram-v2
                                direction LR
                                [*] --> Received
                                Received --> SignatureCaptured : Webhook Received
                                SignatureCaptured --> Forwarded : Signature Verified
                                Forwarded --> Accepted : Success
                                Forwarded --> Failed : Error
                                Failed --> RetryQueued : Retry
                                RetryQueued --> Forwarded : Retry Sent
                                Accepted --> [*]
                        </div>
                    </div>
                </article>

                <article class="feature-block">
                    <div class="feature-heading-row">
                        <h4>Recapx Split Settlement + Offers</h4>
                        <div class="pr-evidence pr-evidence-corner">
                            <span class="pr-evidence-label">Representative PRs</span>
                            <div class="pr-evidence-badges">
                                <span class="pr-evidence-badge">#7058</span>
                                <span class="pr-evidence-badge">#7151</span>
                                <span class="pr-evidence-badge">#7192</span>
                                <span class="pr-evidence-badge">#7345</span>
                            </div>
                        </div>
                    </div>
                    <ul class="feature-points">
                        <li><strong>Purpose:</strong> Handle split-settlement webhooks securely and ingest Recapx offers via SFTP.</li>
                        <li><strong>Complexity:</strong> Signature + replay protection, idempotency guard, outbound signed partner response.</li>
                        <li><strong>Importance:</strong> Protects financial correctness while enabling settlement and offer intelligence.</li>
                        <li><strong>Verified Flow:</strong> 1) signature/replay validation, 2) idempotency by webhook ID, 3) OPEN/UPDATE/CLOSE settlement upsert, 4) sync to transactions API, 5) signed callback to Recapx, 6) offers imported from SFTP.</li>
                    </ul>

                    <div class="diagram-card">
                        <div class="diagram-caption">Architecture Flow</div>
                        <div class="mermaid">
                            flowchart LR
                                RX[Recapx Webhook] --> V[Verify signature + timestamp]
                                V --> I[Idempotency check]
                                I --> SS[SplitSettlementService]
                                SS --> DB[(split_settlement_accounts)]
                                SS --> TX[Transactions Sync]
                                SS --> RESP[Signed Response to Recap]
                                SFTP[SFTP offers.csv] --> OFF[Offers Import Service]
                                OFF --> ODB[(customer_recapx_offers)]
                        </div>
                    </div>

                    <div class="diagram-card">
                        <div class="diagram-caption">Sequence</div>
                        <div class="mermaid">
                            sequenceDiagram
                                participant RX as Recapx
                                participant CTRL as Webhook Controller
                                participant SVC as SplitSettlementService
                                participant DB as DB
                                participant TX as Transactions Service

                                RX->>CTRL: split-settlement webhook
                                CTRL->>CTRL: signature + replay validation
                                CTRL->>SVC: process request
                                SVC->>DB: idempotency + upsert
                                SVC->>TX: createSplitSettlement
                                SVC-->>RX: signed partner callback
                        </div>
                    </div>

                    <div class="diagram-card">
                        <div class="diagram-caption">State Diagram</div>
                        <div class="mermaid">
                            stateDiagram-v2
                                direction LR
                                [*] --> EventReceived
                                EventReceived --> Open : OPEN/UPDATE
                                EventReceived --> Closed : CLOSE
                                Open --> Open : UPDATE
                                Open --> Closed : CLOSE
                                Closed --> Open : REOPEN
                                Closed --> [*]
                        </div>
                    </div>
                </article>

                <article class="feature-block">
                    <div class="feature-heading-row">
                        <h4>Bespoke Pricing + Card Rates + Blended Logic</h4>
                        <div class="pr-evidence pr-evidence-corner">
                            <span class="pr-evidence-label">Representative PRs</span>
                            <div class="pr-evidence-badges">
                                <span class="pr-evidence-badge">#5132</span>
                                <span class="pr-evidence-badge">#6292</span>
                                <span class="pr-evidence-badge">#6365</span>
                                <span class="pr-evidence-badge">#6433</span>
                                <span class="pr-evidence-badge">#6449</span>
                            </div>
                        </div>
                    </div>
                    <ul class="feature-points">
                        <li><strong>Purpose:</strong> Enable custom pricing while enforcing strict template guardrails.</li>
                        <li><strong>Complexity:</strong> Multi-dimensional validation (rate, transaction fee, uplift, blended profiles).</li>
                        <li><strong>Importance:</strong> Direct commercial impact on contracts, quotes, and partner competitiveness.</li>
                        <li><strong>Verified Flow:</strong> 1) partner template resolved, 2) min/max and uplift/blended constraints validated, 3) pending set persisted, 4) activation cron promotes accepted sets, 5) active rates propagate to contracts and MID usage.</li>
                    </ul>

                    <div class="diagram-card">
                        <div class="diagram-caption">Architecture Flow</div>
                        <div class="mermaid">
                            flowchart LR
                                IN[Pricing Input] --> TMPL[Template Resolution]
                                TMPL --> VAL[Validation Engine]
                                VAL --> PEND[(Pending Card Rate Set)]
                                PEND --> ACT[Activation Cron]
                                ACT --> LIVE[(Active Rates)]
                                LIVE --> USE[Quotes/Contracts/APIs]
                        </div>
                    </div>

                    <div class="diagram-card">
                        <div class="diagram-caption">Sequence</div>
                        <div class="mermaid">
                            sequenceDiagram
                                actor User
                                participant API as Pricing API
                                participant CRS as CardRatesService
                                participant CCR as CustomerCardRatesService
                                participant DB as DB
                                participant CRON as Activation Cron

                                User->>API: submit bespoke rates
                                API->>CRS: resolve template limits
                                CRS-->>CCR: baseline constraints
                                CCR->>DB: persist pending set
                                CRON->>DB: activate accepted sets
                                DB-->>API: active rates available
                        </div>
                    </div>

                    <div class="diagram-card">
                        <div class="diagram-caption">State Diagram</div>
                        <div class="mermaid">
                            stateDiagram-v2
                                direction LR
                                [*] --> Draft
                                Draft --> Validated : Validate
                                Validated --> Rejected : Reject
                                Validated --> Pending : Submit
                                Pending --> Activated : Approve
                                Pending --> Cancelled : Cancel
                                Activated --> [*]
                        </div>
                    </div>
                </article>

                <article class="feature-block">
                    <div class="feature-heading-row">
                        <h4>Verofy Finance + Daily/Monthly Collection</h4>
                        <div class="pr-evidence pr-evidence-corner">
                            <span class="pr-evidence-label">Representative PRs</span>
                            <div class="pr-evidence-badges">
                                <span class="pr-evidence-badge">#5314</span>
                                <span class="pr-evidence-badge">#5499</span>
                                <span class="pr-evidence-badge">#5528</span>
                                <span class="pr-evidence-badge">#6136</span>
                            </div>
                        </div>
                    </div>
                    <ul class="feature-points">
                        <li><strong>Purpose:</strong> Automate collection setup with daily/monthly branching.</li>
                        <li><strong>Complexity:</strong> Asynchronous finder/processor jobs, eligibility filters, and collection payload orchestration.</li>
                        <li><strong>Importance:</strong> Core monetization and payment lifecycle enablement for finance contracts.</li>
                        <li><strong>Verified Flow:</strong> 1) finder job selects eligible contracts, 2) processor dispatches per contract, 3) branch by <code>daily_collection</code>, 4) transactions fee collection is created, 5) collection IDs and setup timestamps persist.</li>
                    </ul>

                    <div class="diagram-card">
                        <div class="diagram-caption">Architecture Flow</div>
                        <div class="mermaid">
                            flowchart LR
                                SCH[Finance Scheduler] --> FND[Find eligible contracts]
                                FND --> PRC[Process job]
                                PRC --> BR{daily_collection?}
                                BR -->|Yes| DLY[Daily collection path]
                                BR -->|No| MTH[Monthly collection path]
                                DLY --> TX[TransactionsService collection create]
                                MTH --> TX
                                TX --> CST[(contract fee_collection_id + setup completed)]
                        </div>
                    </div>

                    <div class="diagram-card">
                        <div class="diagram-caption">Sequence</div>
                        <div class="mermaid">
                            sequenceDiagram
                                participant SCH as Scheduler
                                participant FIND as Finder Job
                                participant PROC as Processor Job
                                participant FIN as Finance Service
                                participant TX as Transactions Service
                                participant DB as Contract DB

                                SCH->>FIND: run
                                FIND->>DB: select eligible contracts
                                FIND->>PROC: dispatch contract jobs
                                PROC->>FIN: handle finance path
                                FIN->>TX: create fee collection
                                TX-->>FIN: collection ids
                                FIN->>DB: persist completion state
                        </div>
                    </div>

                    <div class="diagram-card">
                        <div class="diagram-caption">State Diagram</div>
                        <div class="mermaid">
                            stateDiagram-v2
                                direction LR
                                [*] --> CompletedContract
                                CompletedContract --> Eligible : Eligible
                                Eligible --> Queued : Queue
                                Queued --> DailyMode : Daily
                                Queued --> MonthlyMode : Monthly
                                DailyMode --> CollectionCreated : Collect
                                MonthlyMode --> CollectionCreated : Collect
                                CollectionCreated --> SetupCompleted : Complete
                                CollectionCreated --> RetryPending : Retry
                                RetryPending --> Queued : Requeue
                                SetupCompleted --> [*]
                        </div>
                    </div>
                </article>
            </div>

            <h3 class="section-subtitle">Medium-Level Features (Medium Scope, Production Delivery)</h3>
            <div class="narrative-card">
                <p class="content-text">
                    These features delivered broad product value with moderate complexity and strong operational impact,
                    complementing the advanced architecture domains above.
                </p>
            </div>

            <div class="stats-row stats-row-clean">
                <article class="stats-table stats-table-clean stats-card">
                    <h4 class="mini-title">Medium Feature Registry</h4>
                    <div class="table-wrap">
                        <table class="stats-registry-table">
                            <thead>
                                <tr>
                                    <th>Feature</th>
                                    <th>Scope</th>
                                    <th>Core Purpose</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>PBL + Manual Payment Orchestration</td>
                                    <td>Payment lifecycle</td>
                                    <td>Reliable upfront collection with manual fallback and tracker visibility.</td>
                                </tr>
                                <tr>
                                    <td>Monthly GoCardless Automation</td>
                                    <td>Billing operations</td>
                                    <td>Automate monthly setup requests and reminder completion path.</td>
                                </tr>
                                <tr>
                                    <td>Proof of Address (POA) Automation</td>
                                    <td>Compliance workflow</td>
                                    <td>Automate POA verification outcomes and site-visit rule updates.</td>
                                </tr>
                                <tr>
                                    <td>Chargeback + VTiger Sync</td>
                                    <td>Support/ops integration</td>
                                    <td>Process chargeback records and synchronize operational support visibility.</td>
                                </tr>
                                <tr>
                                    <td>Package Pricing + ISV Templates</td>
                                    <td>Commercial configuration</td>
                                    <td>Template-driven package pricing and partner-level synchronization.</td>
                                </tr>
                                <tr>
                                    <td>Terminal Order Automation</td>
                                    <td>Fulfillment lifecycle</td>
                                    <td>Order, dispatch, and delivery orchestration with status synchronization.</td>
                                </tr>
                                <tr>
                                    <td>Messaging + Tracking + Audit Trail</td>
                                    <td>Observability</td>
                                    <td>End-to-end timeline for notifications, status updates, and audits.</td>
                                </tr>
                                <tr>
                                    <td>Code Quality + Security Hardening</td>
                                    <td>Engineering governance</td>
                                    <td>Audit-to-remediation delivery for maintainability and platform safety.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </article>
            </div>

            <div class="feature-stack feature-stack-clean">
                <article class="feature-block">
                    <div class="feature-heading-row">
                        <h4>PBL + Manual Payment Orchestration</h4>
                    </div>
                    <ul class="feature-points">
                        <li><strong>Purpose:</strong> Ensure reliable upfront collection using generated pay links, manual fallback, and operational visibility.</li>
                        <li><strong>Flow:</strong> 1) Partner requests PBL, 2) PaymentIQ link is generated and traced, 3) customer pays, 4) contract/payment status is updated, 5) tracker and operation logs are exposed to Partner/Admin.</li>
                    </ul>
                    <div class="diagram-card">
                        <div class="diagram-caption">Feature Flow</div>
                        <div class="mermaid">
                            flowchart LR
                                A1[1 Partner/Admin Generate Link] --> A2[2 POSUpfrontPblService Create PaymentIQ Link]
                                A2 --> A3[3 Customer Opens and Pays]
                                A3 --> A4[4 POSPblPaymentCollectionService Updates Contract and Settings]
                                A4 --> A5[5 Tracker and Operation Log in Portals]
                        </div>
                    </div>
                </article>

                <article class="feature-block">
                    <div class="feature-heading-row">
                        <h4>Monthly GoCardless Automation</h4>
                    </div>
                    <ul class="feature-points">
                        <li><strong>Purpose:</strong> Automate monthly setup requests and recurring reminders until completion.</li>
                        <li><strong>Flow:</strong> 1) Acquiring-approved event starts monthly setup, 2) contract stores <code>monthly_requested_at</code>, 3) reminder cron selects incomplete records, 4) daily reminders continue until payment completion.</li>
                    </ul>
                    <div class="diagram-card">
                        <div class="diagram-caption">Feature Flow</div>
                        <div class="mermaid">
                            flowchart LR
                                B1[1 Monthly Contract Approved] --> B2[2 GoCardless and DirectDebit Services Trigger Messaging]
                                B2 --> B3[3 Contract Monthly Requested Timestamp Saved]
                                B3 --> B4[4 Reminder Cron and Job Run Daily]
                                B4 --> B5[5 Reminder Stops When Contract is Completed]
                        </div>
                    </div>
                </article>

                <article class="feature-block">
                    <div class="feature-heading-row">
                        <h4>POA Automation + Site Visit Trigger</h4>
                    </div>
                    <ul class="feature-points">
                        <li><strong>Purpose:</strong> Convert POA verification results into deterministic onboarding actions and seller notifications.</li>
                        <li><strong>Flow:</strong> 1) signed POA webhook is validated, 2) application POA flags are updated, 3) customer POA/site-visit flags are recalculated, 4) rejected POA path can trigger site visit initiation and tracking.</li>
                    </ul>
                    <div class="diagram-card">
                        <div class="diagram-caption">Feature Flow</div>
                        <div class="mermaid">
                            flowchart LR
                                C1[1 POA Webhook Received] --> C2[2 Signature and Payload Validated]
                                C2 --> C3[3 CustomerApplication and Customer Flags Updated]
                                C3 --> C4{4 POA Rejected or Rule Fails}
                                C4 -->|Yes| C5[5 Initiate Site Visit and Notify Seller]
                                C4 -->|No| C6[5 Continue Standard Completion]
                        </div>
                    </div>
                </article>

                <article class="feature-block">
                    <div class="feature-heading-row">
                        <h4>Chargeback + VTiger Sync</h4>
                    </div>
                    <ul class="feature-points">
                        <li><strong>Purpose:</strong> Keep financial risk/support views synchronized between transactions data and support CRM.</li>
                        <li><strong>Flow:</strong> 1) partner chargeback endpoint serves filtered records, 2) arrears enrichment is merged from transactions service, 3) daily cron pulls chargeback feed, 4) support cases are synced to VTiger.</li>
                    </ul>
                    <div class="diagram-card">
                        <div class="diagram-caption">Feature Flow</div>
                        <div class="mermaid">
                            flowchart LR
                                D1[1 Chargebacks Enter Transactions Domain] --> D2[2 Partner API Lists and Enriches Arrears]
                                D2 --> D3[3 Daily VTiger Sync Command Runs]
                                D3 --> D4[4 Support Cases Created or Updated in VTiger]
                                D4 --> D5[5 Support and Partner Teams Share Same View]
                        </div>
                    </div>
                </article>

                <article class="feature-block">
                    <div class="feature-heading-row">
                        <h4>Package Pricing + ISV Template Operations</h4>
                    </div>
                    <ul class="feature-points">
                        <li><strong>Purpose:</strong> Standardize package pricing management through controlled CSV templates and automated synchronization.</li>
                        <li><strong>Flow:</strong> 1) admin uploads template CSV, 2) rows are validated and mapped, 3) package type is derived from product mix, 4) records and media are stored, 5) observer syncs template data to VTiger.</li>
                    </ul>
                    <div class="diagram-card">
                        <div class="diagram-caption">Feature Flow</div>
                        <div class="mermaid">
                            flowchart LR
                                E1[1 Admin Uploads ISV Template CSV] --> E2[2 Controller and Trait Validate and Parse Rows]
                                E2 --> E3[3 Package Classification and Record Persistence]
                                E3 --> E4[4 Template File Stored as Media]
                                E4 --> E5[5 Observer Triggers VTiger Synchronization]
                        </div>
                    </div>
                </article>

                <article class="feature-block">
                    <div class="feature-heading-row">
                        <h4>Terminal Order Fulfillment Automation</h4>
                    </div>
                    <ul class="feature-points">
                        <li><strong>Purpose:</strong> Run deterministic hardware lifecycle transitions with synchronized customer status and notifications.</li>
                        <li><strong>Flow:</strong> 1) terminal ordered, 2) dispatched with tracking/serial update, 3) in-transit and delivered events update package state, 4) product becomes live, 5) customer status and operation logs remain aligned.</li>
                    </ul>
                    <div class="diagram-card">
                        <div class="diagram-caption">Feature Flow</div>
                        <div class="mermaid">
                            flowchart LR
                                F1[1 Ordered] --> F2[2 Dispatched]
                                F2 --> F3[3 In Transit]
                                F3 --> F4[4 Delivered]
                                F4 --> F5[5 Live and Transacting]
                                F5 --> F6[6 Overall Status and Tracker Updated]
                        </div>
                    </div>
                </article>

                <article class="feature-block">
                    <div class="feature-heading-row">
                        <h4>Messaging, Tracker & Audit Trail</h4>
                    </div>
                    <ul class="feature-points">
                        <li><strong>Purpose:</strong> Provide full operational transparency for customer lifecycle decisions and communications.</li>
                        <li><strong>Flow:</strong> 1) domain event occurs, 2) messaging events are triggered, 3) operation log entry is persisted, 4) status tracking history is updated, 5) Partner/Admin tracker endpoints expose timeline context.</li>
                    </ul>
                    <div class="diagram-card">
                        <div class="diagram-caption">Feature Flow</div>
                        <div class="mermaid">
                            flowchart LR
                                G1[1 Domain Event] --> G2[2 MessagingEventsService Dispatch]
                                G2 --> G3[3 CustomerOperationLogService Record]
                                G3 --> G4[4 CustomerStatusTrackingService Record]
                                G4 --> G5[5 Application Tracker and Operation Log APIs]
                        </div>
                    </div>
                </article>

                <article class="feature-block">
                    <div class="feature-heading-row">
                        <h4>Code Quality + Security Hardening</h4>
                    </div>
                    <ul class="feature-points">
                        <li><strong>Purpose:</strong> Maintain engineering reliability and platform security posture with measurable evidence.</li>
                        <li><strong>Flow:</strong> 1) quality/security findings collected, 2) remediation is prioritized and implemented, 3) services and flows are re-validated, 4) evidence reports capture outcomes for governance and GTV documentation.</li>
                    </ul>
                    <div class="diagram-card">
                        <div class="diagram-caption">Feature Flow</div>
                        <div class="mermaid">
                            flowchart LR
                                H1[1 Quality and Security Audits] --> H2[2 Risk Ranked Remediation]
                                H2 --> H3[3 Code and Workflow Hardening]
                                H3 --> H4[4 Verification and Evidence Reports]
                        </div>
                    </div>
                </article>
            </div>

            <div class="diagram-card">
                <div class="diagram-caption">Medium Feature Capability Map</div>
                <div class="mermaid">
                    flowchart LR
                        subgraph M1[Payments and Billing]
                            A[PBL and Manual Payment]
                            B[Monthly GoCardless]
                        end

                        subgraph M2[Compliance and Risk]
                            C[POA and Site Visit]
                            D[Chargeback and VTiger]
                            E[Security Hardening]
                        end

                        subgraph M3[Commercial and Operations]
                            F[Package Template Ops]
                            G[Terminal Fulfillment]
                            H[Messaging and Tracker]
                        end

                        A --> H
                        B --> H
                        C --> H
                        D --> H
                        E --> H
                        F --> G
                        G --> H
                </div>
            </div>

            <h3 class="section-subtitle">Importance & Uniqueness</h3>
            <ul class="clean-list">
                <li>Cross-service orchestration joins APIs, scheduled jobs, webhooks, and multi-portal surfaces into one resilient platform runtime.</li>
                <li>Advanced domains show architectural ownership of integration-critical and financially sensitive workflows.</li>
                <li>Medium domains show broad product delivery across billing, compliance, operations, and support reliability.</li>
                <li>Feature flows are now code-verified against backend, Partner, Merchant, Admin, and Transactions projects.</li>
            </ul>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-content">
                <p class="footer-text">© 2026 Kamran Khalid. All rights reserved.</p>
                <div class="social-links">
                    <a href="https://www.linkedin.com/in/kamran-khalid-4310973a/" class="social-link" target="_blank"
                        aria-label="LinkedIn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z" />
                        </svg>
                    </a>
                    <a href="https://medium.com/@kamrankhalid06" class="social-link" target="_blank"
                        aria-label="Medium">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M3 6.5C3 5.67 3.67 5 4.5 5h15c.83 0 1.5.67 1.5 1.5v11c0 .83-.67 1.5-1.5 1.5h-15C3.67 19 3 18.33 3 17.5v-11zm4.5 9.5c1.93 0 3.5-2.24 3.5-5s-1.57-5-3.5-5-3.5 2.24-3.5 5 1.57 5 3.5 5zm7 0c1.52 0 2.75-2.24 2.75-5s-1.23-5-2.75-5-2.75 2.24-2.75 5 1.23 5 2.75 5zm4.25-.39c.55 0 1-.95 1-2.11s-.45-2.11-1-2.11-1 .95-1 2.11.45 2.11 1 2.11z" />
                        </svg>
                    </a>
                    <a href="mailto:contact@kamrankhalid.com" class="social-link" aria-label="Email">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M0 3v18h24v-18h-24zm21.518 2l-9.518 7.713-9.518-7.713h19.036zm-19.518 14v-11.817l10 8.104 10-8.104v11.817h-20z" />
                        </svg>
                    </a>
                    <span class="social-divider"></span>
                    <div class="social-group">
                        <span class="social-label personal">Personal</span>
                        <a href="https://github.com/kamrankhalid786" class="social-link" target="_blank"
                            aria-label="GitHub Personal" title="GitHub Personal">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                            </svg>
                        </a>
                    </div>
                    <div class="social-group">
                        <span class="social-label pro">Pro (Last 2 Years)</span>
                        <a href="https://github.com/kamran-khalid-v9" class="social-link" target="_blank"
                            aria-label="GitHub Pro" title="GitHub Pro">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        function toggleMenu() {
            document.getElementById('navLinks').classList.toggle('active');
        }
    </script>
</body>

</html>
